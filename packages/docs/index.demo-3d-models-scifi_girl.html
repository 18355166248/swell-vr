<!DOCTYPE html>
<html lang="en">

<head>
  <title>three.js webgl - GLTFloader + EXT_texture_avif</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
  <link type="text/css" rel="stylesheet" href="./assets/css/main.css" />
  <script src="./assets/js/onresize.js"></script>
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.158.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.158.0/examples/jsm/"
      }
    }
  </script>
</head>

<body>
  <script type="module">
    import * as THREE from 'three';

    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
    import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
    import { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js';

    let camera, scene, renderer;

    init();
    render();

    function init () {
      camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.set(0, 0, 3);

      scene = new THREE.Scene();
      scene.background = new THREE.Color(0x8A8A8A);

      const loader = new GLTFLoader();

      loader.load('./assets/three/scifi_girl_v.01/scene.gltf', function (gltf) {
        gltf.scene.traverse(function (child) {

          if (child.isMesh) {
            console.log("üöÄ ~ file: index.demo-3d-models-scifi_girl.html:47 ~ child:", child)
            console.log(child.material.normalMap && child.material.normalMap.name, child.material.name)
            child.frustumCulled = false;
            //Ê®°ÂûãÈò¥ÂΩ±
            child.castShadow = true;
            //Ê®°ÂûãËá™ÂèëÂÖâ
            child.material.emissive = child.material.color;
            child.material.emissiveMap = child.material.map;
          }
        })
        gltf.scene.rotation.set(0.4, 0.3, 0)
        scene.add(gltf.scene);
        render();
      });

      // const cubeTextureLoader = new THREE.CubeTextureLoader();
      // cubeTextureLoader.setPath('/packages/docs/assets/three/Park2/');

      // const cubeTexture = cubeTextureLoader.load([
      //   'posx.jpg', 'negx.jpg',
      //   'posy.jpg', 'negy.jpg',
      //   'posz.jpg', 'negz.jpg'
      // ]);
      // console.log("üöÄ ~ file: index.demo-3d-models-scifi_girl.html:68 ~ init ~ cubeTexture:", cubeTexture)

      // scene.background = cubeTexture;


      renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      const controls = new OrbitControls(camera, renderer.domElement);
      controls.addEventListener('change', render);
      controls.target.set(0, 0, 0);
      controls.update();

      initSize()
    }

    function render () {
      renderer.render(scene, camera);
    }
  </script>
</body>

</html>
