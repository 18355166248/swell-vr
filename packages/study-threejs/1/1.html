<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Three.js 快速入门</title>
    <style>
      body {
        margin: 0;
      }
    </style>
  </head>
  <body>
    <!-- 具体路径配置，你根据自己文件目录设置，我的是课件中源码形式 -->
    <script type="importmap">
      {
        "imports": {
          "three": "../../../node_modules/three/build/three.module.js",
          "three/addons/": "../../../node_modules/three/examples/jsm/"
        }
      }
    </script>

    <!-- 配置type="importmap",.html文件也能和项目开发环境一样方式引入threejs -->
    <script type="module">
      import * as THREE from 'three'
      // 引入轨道控制器扩展库OrbitControls.js
      import {OrbitControls} from 'three/addons/controls/OrbitControls.js'
      import Stats from 'three/addons/libs/stats.module.js'

      const scene = new THREE.Scene()
      // 浏览器控制台测试，是否引入成功
      const axesHelper = new THREE.AxesHelper(150)
      scene.add(axesHelper)

      const stats = new Stats()
      //stats.domElement:web页面上输出计算结果,一个div元素，
      document.body.appendChild(stats.domElement)

      const geometry = new THREE.BoxGeometry(100, 100, 100)
      //材质对象Material
      const material = new THREE.MeshLambertMaterial({
        color: 0x00ffff, //设置材质颜色
        transparent: true, //开启透明
        opacity: 0.5, //设置透明度
      })
      for (let i = 0; i < 10; i++) {
        const mesh = new THREE.Mesh(geometry, material) //网格模型对象Mesh
        // 沿着x轴分布
        mesh.position.set(i * 200, 0, 0)
        scene.add(mesh) //网格模型添加到场景中
      }

      const directionalLight = new THREE.DirectionalLight(0xffffff, 1)
      directionalLight.position.set(100, 60, 50)
      scene.add(directionalLight)
      //环境光
      const ambient = new THREE.AmbientLight(0xffffff, 0.4)
      scene.add(ambient)

      const width = window.innerWidth //窗口文档显示区的宽度作为画布宽度
      const height = window.innerHeight //窗口文档显示区的高度作为画布高度

      // 实例化一个透视投影相机对象
      const camera = new THREE.PerspectiveCamera(100, width / height, 1, 3000)
      camera.position.set(292, 223, 185) //相机在Three.js三维坐标系中的位置
      camera.lookAt(400, 0, 0) //坐标原点

      const renderer = new THREE.WebGLRenderer()
      renderer.setSize(width, height) //设置three.js渲染区域的尺寸(像素px)
      document.body.appendChild(renderer.domElement)
      renderer.render(scene, camera)
      // 设置相机控件轨道控制器OrbitControls
      const controls = new OrbitControls(camera, renderer.domElement)
      controls.update()
    </script>
  </body>
</html>
